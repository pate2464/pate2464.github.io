<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dhruv Patel | Ultimate Portfolio</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700&family=Raleway:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/particles.js@2.0.0/particles.min.js"></script>
    <style>
        :root {
            --primary: #2563eb;
            --secondary: #7e22ce;
            --accent: #06b6d4;
            --dark: #0f172a;
            --light: #f8fafc;
            --gray: #94a3b8;
            --transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        
        * { margin: 0; padding: 0; box-sizing: border-box; }
        html { scroll-behavior: smooth; }
        body {
            font-family: 'Montserrat', sans-serif;
            color: var(--light);
            background-color: var(--dark);
            line-height: 1.6;
            overflow-x: hidden;
        }
        h1, h2, h3, h4, h5 { font-family: 'Raleway', sans-serif; font-weight: 700; margin-bottom: 1.5rem; letter-spacing: 1px; }
        .container { width: 90%; max-width: 1200px; margin: 0 auto; padding: 0 20px; }
        
        /* Navigation (No changes from before) */
        nav { position: fixed; top: 0; left: 0; width: 100%; z-index: 1000; padding: 20px 0; transition: all 0.3s ease-in-out; backdrop-filter: blur(10px); background: rgba(15, 23, 42, 0.8); border-bottom: 1px solid rgba(255, 255, 255, 0.1); }
        nav.scrolled { padding: 10px 0; background: rgba(15, 23, 42, 0.95); box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1); }
        .nav-container { display: flex; justify-content: space-between; align-items: center; }
        .logo { font-size: 1.8rem; font-weight: 700; color: var(--light); text-decoration: none; }
        .logo span { color: var(--primary); }
        .nav-links { display: flex; align-items: center; list-style: none; }
        .nav-links li { margin-left: 30px; }
        .nav-links a { color: var(--light); text-decoration: none; font-weight: 500; transition: var(--transition); position: relative; }
        .nav-links a:not(.btn):after { content: ''; position: absolute; bottom: -5px; left: 0; width: 0; height: 2px; background: var(--primary); transition: var(--transition); }
        .nav-links a:hover:not(.btn):after { width: 100%; }
        .menu-btn { display: none; font-size: 1.5rem; cursor: pointer; }

        /* Hero Section */
        .hero { min-height: 100vh; display: flex; align-items: center; position: relative; overflow: hidden; }
        #particles-js { position: absolute; width: 100%; height: 100%; top: 0; left: 0; }
        .hero-container { display: flex; justify-content: space-between; align-items: center; width: 100%; z-index: 2; }
        .hero-content { max-width: 650px; }
        .hero h1, .hero h2, .hero p, .hero .btn-container { opacity: 0; transform: translateY(20px); animation: fadeInUp 1s forwards; }
        .hero h1 { animation-delay: 0.1s; font-size: 4rem; margin-bottom: 1rem; }
        .hero h2 { animation-delay: 0.3s; font-size: 1.8rem; color: var(--primary); margin-bottom: 2rem; }
        .hero p { animation-delay: 0.6s; font-size: 1.2rem; margin-bottom: 2rem; }
        .hero .btn-container { animation-delay: 0.9s; }
        .btn { display: inline-block; padding: 12px 30px; background: var(--primary); color: white; text-decoration: none; border-radius: 50px; font-weight: 600; transition: var(--transition); border: 2px solid var(--primary); }
        .btn:hover { background: transparent; color: var(--primary); transform: translateY(-3px); box-shadow: 0 10px 20px rgba(37, 99, 235, 0.3); }
        .btn-outline { background: transparent; color: var(--primary); margin-left: 15px; }
        .btn-outline:hover { background: var(--primary); color: white; }

        /* 3D Cube - RESTORED */
        .cube-container { width: 250px; height: 250px; position: relative; transform-style: preserve-3d; animation: rotate 20s infinite linear; }
        .cube-face { position: absolute; width: 250px; height: 250px; background: rgba(37, 99, 235, 0.1); border: 2px solid rgba(255, 255, 255, 0.2); display: flex; align-items: center; justify-content: center; font-size: 3rem; color: white; backdrop-filter: blur(5px); }
        .front { transform: translateZ(125px); }
        .back { transform: translateZ(-125px) rotateY(180deg); }
        .right { transform: rotateY(90deg) translateZ(125px); }
        .left { transform: rotateY(-90deg) translateZ(125px); }
        .top { transform: rotateX(90deg) translateZ(125px); }
        .bottom { transform: rotateX(-90deg) translateZ(125px); }
        @keyframes rotate { from { transform: rotateX(0) rotateY(0); } to { transform: rotateX(360deg) rotateY(360deg); } }
        @keyframes fadeInUp { to { opacity: 1; transform: translateY(0); } }

        /* Section Styles */
        section { padding: 120px 0; position: relative; background-color: var(--dark); z-index: 1; }
        .section-title { text-align: center; margin-bottom: 60px; }
        .section-title h2 { font-size: 2.5rem; position: relative; display: inline-block; padding-bottom: 15px; }
        .section-title h2:after { content: ''; position: absolute; bottom: 0; left: 50%; transform: translateX(-50%); width: 80px; height: 3px; background: linear-gradient(to right, var(--primary), var(--secondary)); }

        /* Experience Section - NEW ANIMATION */
        .timeline { position: relative; max-width: 1200px; margin: 0 auto; --timeline-gap: 150px; /* Control initial gap */ }
        .timeline:after { content: ''; position: absolute; width: 6px; background: linear-gradient(to bottom, var(--primary), var(--secondary)); top: 0; bottom: 0; left: 50%; margin-left: -3px; border-radius: 10px; }
        .timeline-item {
            padding: 10px 40px; position: relative; width: 50%;
            opacity: 0;
            transform: translateY(var(--timeline-gap));
            transition: opacity 0.6s ease-out, transform 0.8s cubic-bezier(0.2, 0.9, 0.3, 1);
        }
        .timeline-item.visible { opacity: 1; transform: translateY(0); }
        .timeline-item:nth-child(odd) { left: 0; }
        .timeline-item:nth-child(even) { left: 50%; }
        .timeline-content { padding: 20px 30px; background: rgba(255, 255, 255, 0.05); backdrop-filter: blur(10px); border-radius: 10px; border-left: 4px solid var(--primary); transition: transform 0.3s ease, box-shadow 0.3s ease; }
        .timeline-content:hover { transform: scale(1.03); box-shadow: 0 10px 20px rgba(0,0,0,0.2); }
        
        /* Projects Section - NEW PINNING & SCROLL ANIMATION */
        #projects { padding: 0; height: 300vh; } /* Give runway for scrolling animation */
        .projects-sticky-container {
            height: 100vh;
            width: 100%;
            position: sticky;
            top: 0;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            overflow: hidden;
        }
        .projects-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 30px;
            width: 100%;
            max-width: 1200px;
        }
        .project-card {
            background: rgba(255, 255, 255, 0.05); border-radius: 15px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transform-style: preserve-3d; /* For 3D tilt */
            transition: box-shadow 0.3s ease; /* Transition for hover effect */
            opacity: 0; /* Initially hidden */
        }
        .project-card:hover { box-shadow: 0 20px 30px rgba(0, 0, 0, 0.3); border-color: var(--primary); }
        .project-content { padding: 25px; }
        .project-title { font-size: 1.4rem; color: var(--primary); }
        
        /* Leadership Section - NEW ANIMATION */
        .leadership-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 30px; }
        .leadership-card {
            background: rgba(255, 255, 255, 0.05); border-radius: 15px; padding: 25px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: transform 0.5s ease, box-shadow 0.5s ease, opacity 0.5s ease;
            opacity: 0;
            transform: scale(0.8);
        }
        .leadership-card.visible {
            opacity: 1;
            transform: scale(1);
        }
        .leadership-card:hover { transform: translateY(-10px) scale(1.02); box-shadow: 0 20px 30px rgba(0, 0, 0, 0.2); border-color: var(--secondary); }
        .leadership-icon { font-size: 2.5rem; color: var(--secondary); margin-bottom: 15px; }

        /* Other sections */
        .about-content { display: grid; grid-template-columns: 1fr 1fr; gap: 50px; align-items: center; }
        .about-image img { width: 100%; border-radius: 10px; box-shadow: 0 20px 40px rgba(0, 0, 0, 0.4); }
        .contact-content { display: flex; justify-content: center; }
        footer { background: rgba(0, 0, 0, 0.2); padding: 40px 0; text-align: center; z-index: 5; position: relative; }
        
        /* Media Queries */
        @media (max-width: 1200px) {
            .hero-container { flex-direction: column; text-align: center; }
            .cube-container { display: none; } /* Hide cube on smaller screens */
        }
        @media (max-width: 992px) {
            .about-content { grid-template-columns: 1fr; }
            .timeline:after { left: 31px; }
            .timeline-item { width: 100%; padding-left: 70px; padding-right: 25px; }
            .timeline-item:nth-child(even) { left: 0; }
            .projects-grid { grid-template-columns: 1fr; }
        }
        @media (max-width: 768px) {
            /* Mobile menu styles */
        }
    </style>
</head>
<body>
    <nav id="navbar">
        <!-- Navbar content -->
    </nav>

    <section class="hero" id="hero">
        <div id="particles-js"></div>
        <div class="container hero-container">
            <div class="hero-content">
                <h1>Dhruv Raj Patel</h1>
                <h2>Computer Science Student & Data Science Researcher</h2>
                <p>Focused and driven sophomore at Purdue University. Eager to grow through hands-on experience and collaboration, with a strong passion for coding and problem-solving.</p>
                <div class="btn-container">
                    <a href="#contact" class="btn">Get in Touch</a>
                    <a href="#projects" class="btn btn-outline">View My Work</a>
                </div>
            </div>
            <div class="cube-container">
                <div class="cube-face front"><i class="fas fa-code"></i></div>
                <div class="cube-face back"><i class="fas fa-database"></i></div>
                <div class="cube-face right"><i class="fas fa-robot"></i></div>
                <div class="cube-face left"><i class="fas fa-microchip"></i></div>
                <div class="cube-face top"><i class="fas fa-brain"></i></div>
                <div class="cube-face bottom"><i class="fas fa-rocket"></i></div>
            </div>
        </div>
    </section>

    <section id="about" class="about">
        <!-- Full About section HTML -->
    </section>

    <section id="experience" class="experience">
        <div class="container">
            <div class="section-title"><h2>Professional Experience</h2></div>
            <div class="timeline">
                <!-- Timeline items will be here -->
            </div>
        </div>
    </section>

    <section id="projects" class="projects">
        <div class="projects-sticky-container">
            <div class="section-title"><h2>Projects</h2></div>
            <div class="projects-grid">
                <div class="project-card" id="project-1">
                    <div class="project-content">
                        <h3 class="project-title">Social Media Platform (Java)</h3>
                        <p>Collaborated with a team of 4 members to develop a comprehensive social media application based on Java.</p>
                    </div>
                </div>
                <div class="project-card" id="project-2">
                    <div class="project-content">
                        <h3 class="project-title">Warranty Correlation System</h3>
                        <p>Developed a full-stack Python application using Tkinter for warranty claim analysis and statistical trend finding.</p>
                    </div>
                </div>
                <div class="project-card" id="project-3">
                    <div class="project-content">
                        <h3 class="project-title">Vehicle Clustering Model</h3>
                        <p>Developed a machine learning model for vehicle clustering using geospatial data with MovingPandas and NetworkX.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section id="leadership" class="leadership">
        <div class="container">
            <div class="section-title"><h2>Leadership & Involvement</h2></div>
            <div class="leadership-grid">
                <!-- Leadership cards here -->
            </div>
        </div>
    </section>

    <section id="contact" class="contact">
        <!-- Full Contact section HTML -->
    </section>

    <footer>
        <!-- Full Footer HTML -->
    </footer>

    <script>
        // Initialize Particles.js
        particlesJS('particles-js', { /* particles.js config */ });

        // Project Card 3D Tilt Effect - RESTORED
        const projectCards = document.querySelectorAll('.project-card');
        projectCards.forEach(card => {
            card.addEventListener('mousemove', function(e) {
                const rect = this.getBoundingClientRect();
                const x = e.clientX - rect.left;
                const y = e.clientY - rect.top;
                const rotateY = -1/15 * (x - rect.width / 2);
                const rotateX = 1/15 * (y - rect.height / 2);
                this.style.transform = `perspective(1000px) rotateX(${rotateX}deg) rotateY(${rotateY}deg)`;
            });
            card.addEventListener('mouseout', function() {
                this.style.transform = 'perspective(1000px) rotateX(0) rotateY(0)';
            });
        });

        // Advanced Scroll Animations
        const experienceSection = document.getElementById('experience');
        const timelineItems = document.querySelectorAll('.timeline-item');
        const projectsSection = document.getElementById('projects');
        const project1 = document.getElementById('project-1');
        const project2 = document.getElementById('project-2');
        const project3 = document.getElementById('project-3');
        const leadershipCards = document.querySelectorAll('.leadership-card');
        
        function handleScroll() {
            const scrollY = window.scrollY;
            const wh = window.innerHeight;

            // --- Experience Section Animation ---
            const expTop = experienceSection.offsetTop;
            const expHeight = experienceSection.offsetHeight;
            if (scrollY > expTop - wh && scrollY < expTop + expHeight) {
                const scrollProgress = (scrollY - (expTop - wh * 0.8)) / (expHeight * 0.5);
                
                timelineItems.forEach((item, index) => {
                    const revealPoint = index * 0.2;
                    if (scrollProgress > revealPoint) {
                        item.classList.add('visible');
                    }
                    // Gap compression logic
                    const gapReduction = Math.min(1, Math.max(0, scrollProgress - 0.5)) * 150; // Compress after 50% scroll
                    item.style.setProperty('--timeline-gap', `${150 - gapReduction}px`);
                });
            }

            // --- Projects Section Pinning Animation ---
            const projTop = projectsSection.offsetTop;
            const projHeight = projectsSection.offsetHeight;
            if (scrollY >= projTop && scrollY <= projTop + projHeight - wh) {
                const progress = (scrollY - projTop) / (projHeight - wh); // 0 to 1
                
                // Creative paths for cards
                const opacity = Math.min(1, progress * 4);
                
                // Card 1: Top-left curve
                const p1x = -50 * (1 - progress);
                const p1y = -120 * (1 - Math.pow(progress, 2));
                const p1r = -20 * (1 - progress);
                project1.style.transform = `translateX(${p1x}%) translateY(${p1y}%) rotate(${p1r}deg)`;
                project1.style.opacity = opacity;

                // Card 2: Bottom-up
                const p2y = 120 * (1 - progress);
                project2.style.transform = `translateY(${p2y}%)`;
                project2.style.opacity = opacity;

                // Card 3: Top-right curve
                const p3x = 50 * (1 - progress);
                const p3y = -120 * (1 - Math.pow(progress, 2));
                const p3r = 20 * (1 - progress);
                project3.style.transform = `translateX(${p3x}%) translateY(${p3y}%) rotate(${p3r}deg)`;
                project3.style.opacity = opacity;

            } else if (scrollY < projTop) {
                // Reset if scrolled above
                [project1, project2, project3].forEach(p => { p.style.opacity = 0; });
            } else {
                // Lock in final position if scrolled past
                project1.style.transform = 'translate(0,0) rotate(0)';
                project2.style.transform = 'translate(0,0)';
                project3.style.transform = 'translate(0,0) rotate(0)';
                [project1, project2, project3].forEach(p => { p.style.opacity = 1; });
            }

            // --- Leadership Staggered Animation ---
            leadershipCards.forEach((card, index) => {
                const cardTop = card.getBoundingClientRect().top;
                if (cardTop < wh * 0.8) {
                    card.style.transitionDelay = `${index * 150}ms`;
                    card.classList.add('visible');
                }
            });
        }
        
        window.addEventListener('scroll', handleScroll);
        // Initial check on load
        document.addEventListener('DOMContentLoaded', handleScroll);
    </script>
</body>
</html>
